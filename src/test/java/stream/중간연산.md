# 중간연산

스트림은 마치 데이터베이스에 질의를 하는 것과 같은 느낌, 중간 연산과 최종 연산으로 분류할 수 있으며 중간 연산은 연속해서 연결할 수 있다. 반면 최종 연산은 한번만 가능하다.

1. **지연된 연산**, 최종 연산이 수행되기 전까지 중간 연산은 수행되지 않는다.

## `skip(), limit()` 자르기

```java
class StreamTest {

	@Test
	public void 자르기() {
		// 1 ~ 9 까지 배열 생성
		int[] one2nine = IntStream.range(1, 10).toArray();
		assertThat(one2nine).isEqualTo(new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9});

		// 3번째 요소까지 스킵, 그 후 두개만
		int[] four2five = Arrays.stream(one2nine)
				.skip(3)
				.limit(2)
				.toArray();
		assertThat(four2five).isEqualTo(new int[]{4, 5});

		// 소스에서 처음 5개만
		int[] one2five = Arrays.stream(one2nine).limit(5).toArray();
		assertThat(one2five).isEqualTo(new int[]{1, 2, 3, 4, 5});
	}
}
```

## `filter(), distinct()` 거르기

```java
class StreamTest {
	@Test
	public void 거르기() {
		int[] numbers = new int[]{1, 1, 2, 2, 4, 5, 5, 7, 9};

		// 짝수만
		// Stream<T> filter(Predicate<T> predicate);
		int[] evenNumbers = Arrays.stream(numbers)
				.filter(v -> v % 2 == 0)
				.toArray();
		assertThat(evenNumbers).isEqualTo(new int[]{2, 2, 4});

		// 중복제거
		// Stream<T> distinct()
		int[] distinctNumbers = Arrays.stream(numbers)
				.distinct()
				.toArray();
		assertThat(distinctNumbers).isEqualTo(new int[]{1, 2, 4, 5, 7, 9});
	}
}
```